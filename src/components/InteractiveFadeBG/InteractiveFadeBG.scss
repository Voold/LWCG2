@property --color-stop-1 {
  syntax: '<color>';
  initial-value: #ff0080;
  inherits: false;
}

@property --color-stop-2 {
  syntax: '<color>';
  initial-value: #7928ca;
  inherits: false;
}

.gradient-container {
  user-select: none;
  min-height: 100vh;
  width: 100vw;
  position: absolute;
  overflow: hidden;
  top: 0;
  left: 0;
  z-index: -10;

  filter: url('#goo');
  

  .morphing-blob {
    position: absolute;
    left: var(--mouse-x);
    top: var(--mouse-y);
    width: 700px;
    height: 700px;
    background: radial-gradient(circle at center, var(--color-3) 0%, transparent 50%);
    background: radial-gradient(
      circle at center, 
      var(--color-stop-1) 0%, 
      var(--color-stop-2) 10%, 
      rgba(0, 0, 0, 0.1) 20%, 
      transparent 50%
    );
    filter: blur(50px);
    pointer-events: none;
    animation:
      gradientShift 6s ease-in-out infinite,
      morph 12s ease-in-out infinite;
    z-index: 2;
  }
}

@mixin blob-style($size, $duration, $delay: 0s) {
  position: absolute;
  width: $size;
  height: $size;
  
  // Плавное расплывание: 
  // 0.9 в центре -> 0.1 к 70% -> 0 на 100%
  background: radial-gradient(
    circle at center, 
    var(--color-stop-1) 0%, 
    var(--color-stop-2) 40%, 
    rgba(0, 0, 0, 0.1) 70%, 
    transparent 100%
  );

  filter: blur(90px); 
  
  mix-blend-mode: screen;
  opacity: 0.8; // Общая прозрачность слоя для мягкости
  
  animation: 
    move #{$duration} linear infinite, 
    morphBubble #{$duration * 0.7} ease-in-out infinite alternate,
    gradientShift #{$duration * 2} ease-in-out infinite;
    
  animation-delay: $delay;
}
.bg-1 { @include blob-style(max(100px, 22vw), 25s, 0s); top: -20%; left: -20%; }
.bg-2 { @include blob-style(max(300px, 19vw), 30s, 5s); bottom: -10%; right: -10%; }
.bg-3 { @include blob-style(max(400px, 32vw), 35s, 1s); top: 10%; left: 10%; }
.bg-4 { @include blob-style(max(300px, 35vw), 28s, -2s); bottom: -20%; left: -10%; }
.bg-5 { @include blob-style(max(500px, 20vw), 25s, -2s); top: 10%; right: 15%; }


@keyframes move {
  0% { translate: 0 0; rotate: 0deg; scale: 1; }
  20% { translate: 18vw -2vh; rotate: 45deg; scale: 1.1; }
  40% { translate: 0vw 25vh; rotate: -90deg; scale: 0.9; }
  60% { translate: 25vw 15vh; rotate: 180deg; scale: 1.2; }
  80% { translate: -5vw 2vh; rotate: 270deg; scale: 0.8; }
  100% { translate: 0 0; rotate: 360deg; scale: 1; }
}

@keyframes morph {
  0%, 100% { border-radius: 12% 58% 90% 30% / 45% 45% 55% 55%; transform: translate(-51%, -49%) scale(1); }
  50% { border-radius: 10% 70% 70% 10% / 82% 35% 65% 98%; transform: translate(-52%, -49%) scale(1.1); }
}

@keyframes morphBubble {
  0%, 100% { 
    border-radius: 42% 58% 70% 30% / 45% 45% 55% 55%; 
    scale: 1; 
  }
  50% { 
    border-radius: 30% 70% 70% 30% / 82% 35% 65% 18%; 
    scale: 1.2; 
  }
}

@keyframes gradientShift {
  0% {
    --color-stop-1: #ff0080;
    --color-stop-2: #7928ca;
  }
  33% {
    --color-stop-1: #4facfe;
    --color-stop-2: #00f2fe;
  }
  66% {
    --color-stop-1: #f093fb;
    --color-stop-2: #f5576c;
  }
  100% {
    --color-stop-1: #ff0080;
    --color-stop-2: #7928ca;
  }
}

@media (width <= 320px) {
  .gradient-container {
    width: 320px;
    height: 400vh;
  }
}